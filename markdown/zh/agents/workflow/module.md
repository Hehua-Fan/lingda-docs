---
title: 模块
---

本文将介绍 Agents 平台中各类核心模块的作用与使用方式。通过对模块的合理组合与编排，用户可以构建出功能丰富、逻辑清晰的智能体，实现自然语言理解、信息处理、文档解析、多模态交互等能力。

模块划分涵盖了用户输入、AI处理、信息响应、知识库调用、视觉识别、多Agent联动等多个维度。掌握每个模块的功能与参数配置，将帮助你更高效地进行智能体设计，并满足各类复杂业务场景的需求。

* 参考链接：[内置函数/变量说明](https://uxkpl4cba3j.feishu.cn/wiki/WBFkwSv27ig0SvkxKvDc6bAsn8d)

# 用户提问（入口）

在对话过程中，我们往往需要获取用户的提问，来了解用户意图。借助“用户问题”模块可以获取用户提问/选择内容，并将内容传输给其他模块。

<center>
<img src='/img/agent-1-2-1.png' width=100%></img>
</center>

| 参数名称       | 类型         | 功能介绍 |
|----------------|--------------|----------|
| 联动激活       | 布尔型       | 当前组件在“所有上游条件都为 True”时才会执行。 |
| 任一激活       | 布尔型       | 当前组件在“任一上游条件为 True”时即执行。 |
| 输入文本       | 字符串类型   | 允许用户输入文字，输出给“文本信息”节点。 |
| 上传文档       | 字符串类型   | 允许上传多个文档（每个最多 50MB），支持 `.pdf`、`.doc`、`.docx` 格式。 |
| 上传图片       | 字符串类型   | 允许上传多个图片（每个最多 30MB），支持 `.pdf`、`.doc`、`.docx` 格式。 |
| 文档审核       | 字符串类型   | 开启文档比对功能，上传文档与指定文档进行比对。 |
| 添加按钮       | -            | 添加可触发的按钮，可作为执行动作入口。 |
| 未点击按钮     | 布尔型       | 用于判断用户是否点击了按钮，用于流程控制。 |
| 按钮节点       | 布尔型       | 点击按钮后开始下游流程；若未点击，则不触发。 |
| 模块运行结束   | 布尔型       | 当前模块执行结束则为 True，用于流程控制。 |


# 大模型
## 智能对话

智能对话模块借助 AI 能力，将用户发送的内容，通过大语言模型进行处理并回复给用户指定内容。

<center>
<img src='/img/agent-1-2-3.png' width=45%></img>
</center>

| 参数名称               | 类型                   | 功能介绍 |
|------------------------|------------------------|----------|
| 联动激活               | 布尔型                 | 上游所有条件为 True 时激活当前组件。 |
| 任一激活               | 布尔型                 | 上游任一条件为 True 时激活当前组件。 |
| 信息输入               | 字符串类型             | 接收上游文本，作为大模型输入。 |
| 知识库搜索结果         | 知识库搜索结果类型     | 接收知识库搜索组件的结果。 |
| 聊天上下文             | -                      | 提供 0–6 条历史记录，辅助模型理解上下文。 |
| 模型选择               | -                      | 选择当前模块用的大语言模型。 |
| 系统提示词（Prompt）   | -                      | 用自然语言描述模型执行任务。 |
| 回复对用户可见         | 布尔型                 | 模块执行但不显示回复内容，用于中间流程。 |
| 回复创造性             | -                      | 控制模型回复的发散程度和多样性。 |
| 回复字数上限           | -                      | 限制模型回复字数。 |
| 回复结束               | 布尔型                 | 输出“是/否”，标记模块是否结束。 |
| 回复内容               | 字符串类型             | 模型生成的回复，可供用户查看或模块使用。 |
| 模块运行结束           | 布尔型                 | 模块完成后输出 True，触发下游流程。 |


## 确定回复

在需要将特定内容回复给用户时，可以使用确定回复模块，用户将直接收到文本框中的内容。如果回复内容节点链接外部信息源，则链接信息将覆盖输入框信息。

<center>
<img src='/img/agent-1-2-5.png' width=45%></img>
</center>

| 参数名称               | 类型         | 功能介绍 |
|------------------------|--------------|----------|
| 联动激活               | 布尔型       | 所有上游条件为 True 时执行该模块。 |
| 任一激活               | 布尔型       | 任一上游条件为 True 时执行该模块。 |
| 回复对用户可见         | -            | 模块执行但不展示回复，适用于中间流程。 |
| 回复内容（输入）       | 字符串类型   | 有输入时使用输入内容，无输入时取文本框内容输出。 |
| 回复内容（输出）       | 字符串类型   | 输出上方内容，可连接不同节点展示不同内容。 |
| 模块运行结束           | 布尔型       | 模块结束后输出 True，用于触发下游流程。 |
 

## 信息分类 

借助 AI 的智能分析，将用户问题进行分类，可以针对不同类型的问题执行不同操作，方便进行个性化处理

<center>
<img src='/img/agent-1-2-7.png' width=45%></img>
</center>


| 参数名称               | 类型                   | 功能介绍 |
|------------------------|------------------------|----------|
| 联动激活               | 布尔型                 | 所有上游条件为 True 时执行该模块。 |
| 任一激活               | 布尔型                 | 任一上游条件为 True 时执行该模块。 |
| 信息输入               | 字符串类型             | 输入文本作为大模型的输入。 |
| 知识库搜索结果         | 知识库搜索结果类型     | 接收知识库搜索模块返回的结果。 |
| 聊天上下文             | -                      | 提供 0～6 条历史对话，辅助模型理解用户意图。 |
| 模型选择               | -                      | 指定当前模块使用的大语言模型。 |
| 系统提示词（Prompt）   | -                      | 用自然语言描述模型处理任务的目标。 |
| 添加标签               | -                      | 根据 prompt 分类提取内容并打标签，可输出多个标签用于后续流程。 |
| 标签命中（输出）       | 布尔型                 | 若内容命中设定标签，则输出 True，否则为 False。 |
| 分类结果（JSON）       | 字符串类型             | 输出分类结果，格式为 JSON。 |
| 模块运行结束           | 布尔型                 | 模块结束后输出 True，用于触发下游流程。 |


## 信息提取 

- 通过 AI 对语义的理解，可以从输入信息中提取目标信息
- 常用于提取搜索关键词，SQL语句等，结合API、工具和应用模块使用，可以实现复杂功能

<center>
<img src='/img/agent-1-2-9.png' width=45%></img>
</center>


| 参数名称               | 类型                   | 功能介绍 |
|------------------------|------------------------|----------|
| 联动激活               | 布尔型                 | 所有上游条件为 True 时执行该模块。 |
| 任一激活               | 布尔型                 | 任一上游条件为 True 时执行该模块。 |
| 信息输入               | 字符串类型             | 上游文本作为大语言模型的输入。 |
| 知识库搜索结果         | 知识库搜索结果类型     | 接收知识库搜索组件结果。 |
| 聊天上下文             | -                      | 提供 0–6 条历史记录，增强模型理解。 |
| 模型选择               | -                      | 指定当前模块使用的大语言模型。 |
| 系统提示词（Prompt）   | -                      | 自然语言描述模型任务。 |
| 提取字段               | -                      | 配置多个字段供模型识别（如城市、是否字段等）。 |
| 完全提取               | 布尔型                 | 用户回复中包含所有字段（含必填+选填）时为 True。 |
| 必填字段全提取         | 布尔型                 | 用户回复中包含所有必填字段时为 True。 |
| 提取缺失               | 布尔型                 | 用户回复中缺失部分必填字段时为 True。 |
| 全部提取结果           | 字符串类型             | 输出所有字段及其值，格式为 JSON，用于后续模块。 |
| 提取结果 - xxx         | 字符串类型             | 输出字段“xxx”的提取值。 |
| 模块运行结束           | 布尔型                 | 模块完成后输出 True，用于触发后续流程。 |


## 信息加工  

通过 prompt 对信息进行加工，以获得符合需求的内容。

<center>
<img src='/img/agent-1-2-11.png' width=45%></img>
</center>


| 参数名称               | 类型                   | 功能介绍 |
|------------------------|------------------------|----------|
| 联动激活               | 布尔型                 | 所有上游条件为 True 时执行该模块。 |
| 任一激活               | 布尔型                 | 任一上游条件为 True 时执行该模块。 |
| 信息输入               | 字符串类型             | 上游输出作为大模型输入。 |
| 知识库搜索结果         | 知识库搜索结果类型     | 接收知识库搜索组件的结果。 |
| 聊天上下文             | -                      | 提供 0–6 条聊天记录，辅助理解用户意图。 |
| 模型选择               | -                      | 指定使用的大语言模型。 |
| 系统提示词（Prompt）   | -                      | 描述大模型处理任务的自然语言指令。 |
| 回复结束               | 布尔型                 | 输出“是/否”，表示当前回复是否结束。 |
| 加工结果               | 字符串类型             | 输出大模型处理后的内容结果。 |
| 模块运行结束           | 布尔型                 | 模块执行完成后输出 True，用于触发下游流程。 |


# 知识库
## 知识库搜索  

针对常见的用户提问，可以将问题添加进知识库，便于搜索和查找。而对于“知识库”模块而言，该模块可以输入用户问题，并在知识库中搜索相关问题与解答，并用自然语言进行输出。

<center>
<img src='/img/agent-1-2-13.png' width=45%></img>
</center>


| 参数名称               | 类型                   | 功能介绍 |
|------------------------|------------------------|----------|
| 联动激活               | 布尔型                 | 所有上游条件为 True 时执行该模块。 |
| 任一激活               | 布尔型                 | 任一上游条件为 True 时执行该模块。 |
| 信息输入               | 字符串类型             | 上游文本作为大模型输入。 |
| 关联知识库             | -                      | 选择知识来源，用于搜索召回。 |
| 相似度阈值             | -                      | 设置相似度阈值，低于阈值的片段将被过滤。 |
| 向量相似度权重         | -                      | 设置计算相似度的权重，控制向量召回精度。 |
| 召回数                 | -                      | 设置最多可召回的相关文段数量。 |
| 是否开启重排序         | 布尔型                 | 是否根据用户问题与片段的语义相关性进行 rerank。 |
| 重排序模型             | -                      | 设置用于重排序的模型。 |
| 重排序召回数           | -                      | rerank 后最多保留的片段数量。 |
| 未搜索到相关知识       | 布尔型                 | 未召回到知识时的处理标记。 |
| 搜索到相关知识         | 布尔型                 | 成功召回知识时的处理标记。 |
| 知识库搜索结果         | 知识库搜索结果类型     | 返回召回的知识结果供后续使用。 |
| 模块运行结束           | 布尔型                 | 模块执行完成后输出 True，用于触发下游流程。 |


## 存储到知识库

# 多模态

## 图片提问  

支持用户上传图片后，借助视觉模型的识图能力，回复有关图片的提问信息。

<center>
<img src='/img/agent-1-2-17.png' width=45%></img>
</center>

| 参数名称               | 类型                   | 功能介绍 |
|------------------------|------------------------|----------|
| 联动激活               | 布尔型                 | 所有上游条件为 True 时执行该模块。 |
| 任一激活               | 布尔型                 | 任一上游条件为 True 时执行该模块。 |
| 信息输入               | 字符串类型             | 上游文本作为大模型输入。 |
| 关联知识库             | -                      | 选择知识来源，用于搜索召回。 |
| 相似度阈值             | -                      | 设置相似度阈值，低于阈值的片段将被过滤。 |
| 向量相似度权重         | -                      | 设置计算相似度的权重，控制向量召回精度。 |
| 召回数                 | -                      | 设置最多可召回的相关文段数量。 |
| 是否开启重排序         | 布尔型                 | 是否根据用户问题与片段的语义相关性进行 rerank。 |
| 重排序模型             | -                      | 设置用于重排序的模型。 |
| 重排序召回数           | -                      | rerank 后最多保留的片段数量。 |
| 未搜索到相关知识       | 布尔型                 | 未召回到知识时的处理标记。 |
| 搜索到相关知识         | 布尔型                 | 成功召回知识时的处理标记。 |
| 知识库搜索结果         | 知识库搜索结果类型     | 返回召回的知识结果供后续使用。 |
| 模块运行结束           | 布尔型                 | 模块执行完成后输出 True，用于触发下游流程。 |


## 文档提问  

支持用户上传文档后，直接输入问题，利用大语言模型读取文档后，回复用户。例如“总结这份文档中的要点”，实现即时的文档提问功能。与“文档审核”模块不同的是，这里用户可以自己输入提问问题，而“文档审核”则是预置提问，此处不需要输入问题。

<center>
<img src='/img/agent-1-2-19.png' width=45%></img>
</center>

| 参数名称               | 类型         | 功能介绍 |
|------------------------|--------------|----------|
| 联动激活               | 布尔型       | 所有上游条件为 True 时激活模块。 |
| 任一激活               | 布尔型       | 任一上游条件为 True 时激活模块。 |
| 信息输入               | 字符串类型   | 通常为用户对图片的提问，连接上游输出作为大模型输入。 |
| 文献信息               | 字符串类型   | 接收上传的文档内容，支持 pdf、doc、docx、txt 格式，最多 9 个文件，每个 ≤ 50MB。 |
| 模型选择               | -            | 指定模块使用的大语言模型。 |
| 系统提示词（Prompt）   | -            | 自然语言指令，描述任务目标。 |
| 回复对用户可见         | -            | 模块执行但不展示回复内容，适用于中间处理。 |
| 回复创造性             | -            | 控制回复的发散性，值越大回覆越开放。 |
| 回复字数上限           | -            | 限制生成回复的最大字数。 |
| 回复结束               | 布尔型       | 输出“是/否”，标识模块回复是否结束。 |
| 回复内容               | 字符串类型   | 输出 AI 回复内容，可供用户查看或模块使用。 |
| 模块运行结束           | 布尔型       | 模块完成后输出 True，触发后续流程。 |


# 文档审查 
## 文档审查 
用于文档读取和审核场景，用户上传文档后，模型通过读取文档内容，并根据设定好的提问，依次进行回答。

<center>
<img src='/img/agent-1-2-15.png' width=45%></img>
</center>

| 参数名称               | 类型         | 功能介绍 |
|------------------------|--------------|----------|
| 联动激活               | 布尔型       | 所有上游条件为 True 时激活模块。 |
| 任一激活               | 布尔型       | 任一上游条件为 True 时激活模块。 |
| 文献信息               | 字符串类型   | 连接“用户提问”模块中上传的文献信息内容。 |
| 批量提问               | -            | 支持设置多个问题，结合文档内容生成多个答案，最多支持 100 个。 |
| 模板添加               | -            | 通过 CSV 导入多个提问，一次性批量处理。 |
| 模型选择               | -            | 指定该模块使用的大语言模型。 |
| 系统提示词（Prompt）   | -            | 用自然语言描述需要模型完成的任务。 |
| 回复结束               | 布尔型       | 所有问题均处理完时输出“是/否”，表示是否结束。 |
| 回复内容               | 字符串类型   | 输出大模型生成的内容，供下游使用。 |
| 模块运行结束           | 布尔型       | 模块执行完成后输出 True，用于触发后续流程。 |

## 关键词识别

识别文档中是否包含相关关键词

<center>
<img src='/img/agent-1-2-21.png' width=45%></img>
</center>

| 参数名称       | 类型         | 功能介绍 |
|----------------|--------------|----------|
| 联动激活       | 布尔型       | 所有上游条件为 True 时激活模块。 |
| 任一激活       | 布尔型       | 任一上游条件为 True 时激活模块。 |
| 文献信息       | 字符串类型   | 接收上传文档内容，需开启“文档审核”上传入口。 |
| 模型选择       | -            | 指定当前模块使用的大语言模型。 |
| 识别规则       | -            | 批量输入敏感词，支持分组，含关键词则返回“包含”，否则返回“不包含”。 |
| 识别结果       | -            | 每组返回用户配置的结果内容。 |
| 模块运行结束   | 布尔型       | 模块完成后输出 True，触发后续流程。 |

# 高阶能力
## 智能体对话结束 

- 此模块为多Agents联动场景中，需要用到的的模块。只有当Agent的规划编排中，引入此模块，才可以在“规划”画布左侧 “Agents”处找到此Agent，并可以拖拽到画布中，实现多Agent间的联动
- 记忆变量为当前场景中存储的临时变量，在作为Agent出现在其他Agent的编排中时，记忆变量表示改Agent输出参数，实现跨Agent进行引用。

<center>
<img src='/img/agent-1-2-23.png' width=45%></img>
</center>

<center>
<img src='/img/agent-1-2-24.png' width=100%></img>
</center>

<p style="text-align: center; color: #666; font-size: 14px; margin-top: 8px;">作为其他画布规划中的Agent，运行时会有此弹窗进行确认</p>

| 参数名称                 | 类型 | 功能介绍 |
|--------------------------|------|----------|
| Agent运行结束确认       | -    | 设置弹窗确认 Agent 执行结束的提示文案。 |
| 从头执行                 | -    | 重置 Agent 执行记录，从“用户提问”重新开始执行。 |
| 满意，执行下一步         | -    | Agent 执行后直接进入下一个模块，不再重复执行当前 Agent。 |
| 不满意，重新执行         | -    | 重新执行该 Agent，但不重置从头流程。 |
| 添加agent记忆变量        | -    | 添加布尔型、字符串、搜索结果变量，可通过 `{{key}}` 在后续模块中引用。 |


## 添加记忆变量

## 代码块  

- 通过添加 JavaScript 或 python 代码进行数据处理

<center>
<img src='/img/agent-1-2-26.png' width=45%></img>
</center>

| 参数名称         | 类型       | 功能介绍 |
|------------------|------------|----------|
| 联动激活         | 布尔型     | 所有上游条件为 True 时激活模块。 |
| 任一激活         | 布尔型     | 任一上游条件为 True 时激活模块。 |
| 添加入参         | 多种类型   | 设置输入参数，可为布尔型、字符串或知识库搜索结果。 |
| 语言选择         | -          | 选择代码语言，支持 JavaScript 或 Python。 |
| 代码描述         | -          | 对当前处理逻辑的简要说明（非必填）。 |
| 代码内容         | -          | 填写自定义函数代码，支持 Key-Value 类型输入/输出，key 为入参/出参名称。 |
| 添加出参         | 多种类型   | 设置输出参数类型，与添加入参类似。 |
| 执行成功         | 布尔型     | 代码成功执行时为 True。 |
| 执行异常         | 布尔型     | 代码异常时为 True。 |
| 执行结果         | 字符串     | 输出代码所有结果，多个出参将合并为 JSON 字符串。 |
| 模块运行结束     | 布尔型     | 执行结束后输出 True，用于触发下游流程。 |


## 信息处理  

- 通过正则表达式进行数据处理，仅支持字符串类型的输入与输出。

<center>
<img src='/img/agent-1-2-28.png' width=45%></img>
</center>

| 参数名称         | 类型       | 功能介绍 |
|------------------|------------|----------|
| 联动激活         | 布尔型     | 所有上游条件为 True 时执行模块。 |
| 任一激活         | 布尔型     | 任一上游条件为 True 时执行模块。 |
| 添加入参         | 字符串     | 设置需要处理的输入参数，类型为字符串。 |
| 添加出参         | 多种类型   | 设置输出参数，类型可为字符串等。 |
| 转换规则         | -          | 设置正则表达式，实现入参与出参的转换。 |
| 模块运行结束     | 布尔型     | 模块结束时输出 True，触发下游流程。 |

## 循环  

- 循环组件用于循环流程，使用者将需要循环处理的流程用循环组件的循环起点和循环终点做圈选，启动循环流程。

<center>
<img src='/img/agent-1-2-30.png' width=45%></img>
</center>

| 参数名称           | 类型               | 功能介绍 |
|--------------------|--------------------|----------|
| 联动激活           | 布尔型             | 所有上游条件为 True 时激活模块。 |
| 任一激活           | 布尔型             | 任一上游条件为 True 时激活模块。 |
| 信息输入           | 任意类型的数组     | 输入必须为数组类型，作为循环的基础数据源。 |
| 元素符号           | -                  | 记录当前循环第几次，通过 `{{xxxx.index}}` 引用。 |
| 元素值             | -                  | 当前循环的元素值，通过 `{{xxxx.item}}` 引用。 |
| 数组长度           | -                  | 当前数组总长度，通过 `{{xxxx.length}}` 引用。 |
| 循环单元起点       | 布尔型             | 触发循环开始执行的模块。 |
| 循环单元终点       | 布尔型             | 循环体中最后一个模块结束后触发下一轮。 |
| 模块运行结束       | 布尔型             | 当前模块执行结束时输出 True，触发下游流程。 |

## 文档输出

## Markdown转Word

# 数据库
## 数据库查询
## 数据可视化
## 代码提取器
